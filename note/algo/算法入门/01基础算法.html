<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <link rel="stylesheet" href="https://courses-at-nju-by-hfwei.github.io/cpl-lectures/node_modules/reveal.js-plugins/chalkboard/style.css">
    <script src="https://courses-at-nju-by-hfwei.github.io/cpl-lectures/node_modules/reveal.js-plugins/chalkboard/plugin.js"></script> 
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex, nofollow">
    <meta http-equiv="Permissions-Policy" content="interest-cohort=()">
 
    <script>
const copyButtonLabel = "Copy Code";

// use a class selector if available
let blocks = document.querySelectorAll("pre");

blocks.forEach((block) => {
  // only add button if browser supports Clipboard API
  if (navigator.clipboard) {
    let button = document.createElement("button");

    button.innerText = copyButtonLabel;
    block.appendChild(button);

    button.addEventListener("click", async () => {
      await copyCode(block);
    });
  }
});

async function copyCode(block) {
  let code = block.querySelector("code");
  let text = code.innerText;

  await navigator.clipboard.writeText(text);
}
    </script>
      <style>
        body {counter-reset:section;}
        h1 {counter-reset:subsection;font-size:x-large;}
        h2 {font-size: large;}
        
        h1:before {
        counter-increment:section;
        content:counter(section) ". ";
            font-weight:bold;
            font-size: x-large;
        }
        h2:before {
        counter-increment:subsection;
        content:counter(section) "." counter(subsection) " ";
        font-size: large;
        }
        html, body {
            margin: 5%;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-weight: 500;
        }
        code {
            font-family: 'Courier New', Courier, monospace;
        } 

        pre {
            font-family: 'Courier New', Courier, monospace;
        } 
        div{
            max-width: 100%;
            overflow: auto;
            
        }
        .navbar {
            overflow: hidden;
            background-color: #333;
            position: fixed; /* Set the navbar to fixed position */
            top: 0; /* Position the navbar at the top of the page */
            width: 100%; /* Full width */
        }

        img {
        max-width: 80%;
        height: auto;
        }
        .navbar a {
            float: left;
            display: block;
            color: #f2f2f2;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
        }

        a {
            color: #148bca;
            text-align: center;
            padding-left: 2px;
            padding-right: 2px;
            text-decoration: none;
        }

        p.hidden {
          overflow: hidden;
        }

    </style>
  </head>
  <body>
    
    <div class="navbar">
        <a href="https://shzaiz.github.io">AUG's Wiki</a>
        <a href="index.html"> ↑ Back to contents</a>
        Last updated at 2023-07-02 00:47:13.651268
    </div>

    <div class="toc"></div>
    <a id="toc-button"><i class="far fa-bookmark"></i></a>
    
    <div>
      <h1>排序问题</h1>
<h2>快速排序</h2>
<ol>
<li>
<p>基本思想: 分治法.</p>
</li>
<li>
<p>过程描述</p>
</li>
</ol>
<p>(1)确定元素: 首先随机选取一个数 \(x\) ;</p>
<p>(2)调整数组: 把小于 \(x\) 的放在这个位置的左边, 大于 \(x\) 的放在这个位置的右侧.</p>
<p>(3)递归执行: 一直这样递归下去.</p>
<ol start="3">
<li>问题: 如何进行(2)操作</li>
</ol>
<p>(i) 开两个额外的数组,  \(a[],b[]\) , 如果当前的数小于等于 \(x\) , 就插入 \(a\) , 否则, 插入 \(b\) , 最后把 \(a[],b[]\) 放入原先的数. -- 简单但是不够优美.</p>
<p>(ii) 用两个指针 \(i\) , \(j\) 分别向中间走, 如果 \(i&lt;x\) , 向后移动, 直到 \(i&gt;x\) ,  \(i\) 停下,  \(j\) 也一样. 直到i,j都错位了, 现在把两个指针的内容交换一下就行了. 继续往中间走就行了.
正确性证明: 在任何时候, i左边所有的数 \(\leq x\) (算法的语句保证), j右边的数也是大于 \(x\) 的. 于是就可以分成相应的区间.</p>
<ol start="4">
<li>细节: 边界问题的处理 -- 模板代码</li>
</ol>
<p>(1) 代码的书写</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #B00040">void</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF">qst</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>a[],<span style="color: #bbbbbb"> </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>l,<span style="color: #bbbbbb"> </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>r){
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">if</span>(l<span style="color: #666666">&gt;=</span>r)<span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">return</span>;
<span style="color: #bbbbbb">    </span><span style="color: #3D7B7B; font-style: italic">//(1)</span>
<span style="color: #bbbbbb">    </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>x<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>a[l];<span style="color: #bbbbbb"> </span><span style="color: #3D7B7B; font-style: italic">//Alterate r, (l+r)/2</span>
<span style="color: #bbbbbb">    </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>l<span style="color: #666666">-1</span>,<span style="color: #bbbbbb"> </span>j<span style="color: #666666">=</span>r<span style="color: #666666">+1</span>;<span style="color: #bbbbbb"> </span><span style="color: #3D7B7B; font-style: italic">//Move first, then compare and swap</span>
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">while</span>(i<span style="color: #666666">&lt;</span>j){
<span style="color: #bbbbbb">        </span><span style="color: #008000; font-weight: bold">do</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">++</span>;<span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">while</span>(a[i]<span style="color: #666666">&lt;</span>x);
<span style="color: #bbbbbb">        </span><span style="color: #008000; font-weight: bold">do</span><span style="color: #bbbbbb"> </span>j<span style="color: #666666">--</span>;<span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">while</span>(a[j]<span style="color: #666666">&gt;</span>x);
<span style="color: #bbbbbb">        </span><span style="color: #008000; font-weight: bold">if</span>(i<span style="color: #666666">&lt;</span>j)<span style="color: #bbbbbb"> </span>swap(a[i],a[j]);
<span style="color: #bbbbbb">    </span>}
<span style="color: #bbbbbb">    </span>qst(a,<span style="color: #bbbbbb"> </span>l,<span style="color: #bbbbbb"> </span>j);<span style="color: #bbbbbb"> </span><span style="color: #3D7B7B; font-style: italic">// If x:=r, then this line should be qst(a,l,i-1)</span>
<span style="color: #bbbbbb">    </span>qst(a,j<span style="color: #666666">+1</span>,r);<span style="color: #bbbbbb"> </span><span style="color: #3D7B7B; font-style: italic">// and this line should be qst(a,i,r)</span>
}
</pre></div>

<p>(2) 如果把l改为r但是不变换下面的对称写法:</p>
<p>Hack例.</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span>qst(a,<span style="color: #666666">0</span>,<span style="color: #666666">1</span>)
<span style="color: #666666">2</span>
<span style="color: #666666">1</span><span style="color: #bbbbbb"> </span><span style="color: #666666">2</span><span style="color: #bbbbbb"> </span>,<span style="color: #bbbbbb"> </span><span style="border: 1px solid #FF0000">取</span>x<span style="color: #666666">=1</span>
<span style="color: #666666">^</span>
i<span style="color: #666666">=0</span>,j<span style="color: #666666">=0</span>

qst(a,<span style="color: #666666">0</span>,<span style="color: #666666">1</span>)<span style="color: #bbbbbb"> </span><span style="color: #666666">--&gt;</span><span style="color: #bbbbbb"> </span><span style="border: 1px solid #FF0000">死循环</span>
</pre></div>

<p>因此无法这样做. 更加妥当的方法是选取数组的中点.</p>
<h2>归并排序</h2>
<ol>
<li>
<p>基本思想: 分治.</p>
</li>
<li>
<p>过程描述:</p>
</li>
</ol>
<p>(1) 确定数组中心为分界点 \((l+r)/2\) .</p>
<p>(2) 递归排序左边和右边;</p>
<p>(3) 把左边和右边两个有序的数组合二为一.</p>
<ol start="3">
<li>问题: 如何合二为一</li>
</ol>
<p>假设有a, b, res数组, 开两个指针i,j指向a, b的头. 比较a[i]与b[j]中较小的那一个, 放到答案res数组中, 较小的那一个指针向后移动一位. (相同的时候需要把第一个移动到答案中, 这样做是稳定的(Def. 相同值的会在相同的前后的顺序即可.) )</p>
<p>正确性证明: 因为取的是两个数组中的较小值, 每次总是能够按照从小到大的选取.</p>
<ol start="4">
<li>模板代码</li>
</ol>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #3D7B7B; font-style: italic">// We need a tmp array to store relations...</span>
<span style="color: #B00040">void</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF">mgsort</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>a[],<span style="color: #bbbbbb"> </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>tmp[],<span style="color: #bbbbbb"> </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>l,<span style="color: #bbbbbb"> </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>r){
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">if</span>(l<span style="color: #666666">&gt;=</span>r)<span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">return</span><span style="color: #bbbbbb"> </span>;
<span style="color: #bbbbbb">    </span><span style="color: #3D7B7B; font-style: italic">//(1)</span>
<span style="color: #bbbbbb">    </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>mid<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>(l<span style="color: #666666">+</span>r)<span style="color: #666666">&gt;&gt;1</span>;<span style="color: #bbbbbb"> </span><span style="color: #3D7B7B; font-style: italic">// Bracket missing is also okay.</span>
<span style="color: #bbbbbb">    </span>mgsort(a,<span style="color: #bbbbbb"> </span>tmp,<span style="color: #bbbbbb"> </span>l,<span style="color: #bbbbbb"> </span>mid);
<span style="color: #bbbbbb">    </span>mgsort(a,<span style="color: #bbbbbb"> </span>tmp,<span style="color: #bbbbbb"> </span>mid<span style="color: #666666">+1</span>,<span style="color: #bbbbbb"> </span>r);
<span style="color: #bbbbbb">    </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>k<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span><span style="color: #666666">0</span>,<span style="color: #bbbbbb"> </span>i<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>l,<span style="color: #bbbbbb"> </span>j<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>mid<span style="color: #666666">+1</span>;
<span style="color: #bbbbbb">    </span><span style="color: #3D7B7B; font-style: italic">// merge</span>
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">while</span>(i<span style="color: #666666">&lt;=</span>mid<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;&amp;</span><span style="color: #bbbbbb"> </span>j<span style="color: #666666">&lt;=</span>r){
<span style="color: #bbbbbb">        </span><span style="color: #008000; font-weight: bold">if</span>(a[i]<span style="color: #666666">&lt;=</span>a[j]){
<span style="color: #bbbbbb">            </span>tmp[k<span style="color: #666666">++</span>]<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>a[i<span style="color: #666666">++</span>];
<span style="color: #bbbbbb">        </span>}<span style="color: #008000; font-weight: bold">else</span>{
<span style="color: #bbbbbb">            </span>tmp[k<span style="color: #666666">++</span>]<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>a[j<span style="color: #666666">++</span>];
<span style="color: #bbbbbb">        </span>}
<span style="color: #bbbbbb">    </span>}
<span style="color: #bbbbbb">    </span><span style="color: #3D7B7B; font-style: italic">// Is there anything missing in the loop?</span>
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">while</span>(i<span style="color: #666666">&lt;=</span>mid)<span style="color: #bbbbbb"> </span>tmp[k<span style="color: #666666">++</span>]<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>a[i<span style="color: #666666">++</span>];
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">while</span>(j<span style="color: #666666">&lt;=</span>r)<span style="color: #bbbbbb"> </span>tmp[k<span style="color: #666666">++</span>]<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>a[j<span style="color: #666666">++</span>];
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">for</span>(i<span style="color: #666666">=</span>l,j<span style="color: #666666">=0</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&lt;=</span>r;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">++</span>,<span style="color: #bbbbbb"> </span>j<span style="color: #666666">++</span>)<span style="color: #bbbbbb"> </span>a[i]<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>tmp[j];
}
</pre></div>

<h1>整数二分</h1>
<p>目标: 找到一个性质的边界</p>
<p><img src="https://s2.loli.net/2023/03/24/o9NmQX6dwUxyTnf.png" alt="Img" /></p>
<p><img src="https://s2.loli.net/2023/03/24/aSQLO8TMc4oJpqR.png" alt="Img" /></p>
<p>如果要找红色的点:</p>
<ul>
<li>找一个中间值<code>mid=(l+r+1)&gt;&gt;1</code></li>
<li>判断中间值是不是满足性质<code>check(mid)</code>
<ul>
<li>如果是true, 那么l=mid</li>
<li>如果是false, r=mid-1</li>
</ul>
</li>
<li>循环到第一步, 直到<code>r&gt;=l</code>.</li>
</ul>
<p>如果要找上图绿颜色的分界点:</p>
<ul>
<li>找一个中间值<code>mid=l+r&gt;&gt;1</code></li>
<li>判断中间值是不是满足性质<code>check(mid)</code>
<ul>
<li>如果是true, r=mid</li>
<li>如果是false, l=mid+1</li>
</ul>
</li>
<li>循环到第一步, 直到<code>r&gt;=l</code></li>
</ul>
<h1>高精度</h1>
<h1>高精度运算</h1>
<h2>大整数的存储</h2>
<ol>
<li>存储方式: 倒过来存, 防止进位要修改整个数组.</li>
</ol>
<h2>大整数的加法</h2>
<ol>
<li>方法: 模拟手工加法进位的方法</li>
</ol>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span>      xxxxxx
   +)     xx
   -----1---
      yyyyyy
</pre></div>

<ol start="2">
<li>细节</li>
</ol>
<p>(1) 如果对应的数上都有, 那么直接加, 然后保存对应的值.</p>
<p>(2) 如果没有的话, 就可以直接照抄.</p>
<ol start="3">
<li>Vector&lt;&gt;原理</li>
<li>代码</li>
</ol>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #9C6500">#include</span><span style="color: #bbbbbb"> </span><span style="color: #3D7B7B; font-style: italic">&lt;bits/stdc++.h&gt;</span>
<span style="color: #008000; font-weight: bold">using</span><span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">namespace</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF; font-weight: bold">std</span>;
<span style="color: #9C6500">#define vint vector&lt;int&gt; </span>
vint<span style="color: #bbbbbb"> </span><span style="color: #0000FF">add</span>(vint<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;</span>a,<span style="color: #bbbbbb"> </span>vint<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;</span>b){
<span style="color: #bbbbbb">    </span>vint<span style="color: #bbbbbb"> </span>c;
<span style="color: #bbbbbb">    </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>t<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span><span style="color: #666666">0</span>;
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span><span style="color: #666666">0</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&lt;</span>a.size()<span style="color: #bbbbbb"> </span><span style="color: #666666">||</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">&lt;</span>b.size();<span style="color: #bbbbbb"> </span>i<span style="color: #666666">++</span>){
<span style="color: #bbbbbb">        </span><span style="color: #008000; font-weight: bold">if</span>(i<span style="color: #666666">&lt;</span>a.size())<span style="color: #bbbbbb"> </span>t<span style="color: #666666">+=</span>a[i];
<span style="color: #bbbbbb">        </span><span style="color: #008000; font-weight: bold">if</span>(i<span style="color: #666666">&lt;</span>b.size())<span style="color: #bbbbbb"> </span>t<span style="color: #666666">+=</span>b[i];
<span style="color: #bbbbbb">        </span>c.push_back(t<span style="color: #666666">%10</span>);
<span style="color: #bbbbbb">        </span>t<span style="color: #666666">/=10</span>;
<span style="color: #bbbbbb">    </span>}
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">if</span>(t)<span style="color: #bbbbbb"> </span>c.push_back(<span style="color: #666666">1</span>);
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">return</span><span style="color: #bbbbbb"> </span>c;
}

<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF">main</span>(){
<span style="color: #bbbbbb">    </span>string<span style="color: #bbbbbb"> </span>a,<span style="color: #bbbbbb"> </span>b;<span style="color: #bbbbbb"> </span>cin<span style="color: #666666">&gt;&gt;</span>a<span style="color: #666666">&gt;&gt;</span>b;
<span style="color: #bbbbbb">    </span>vint<span style="color: #bbbbbb"> </span>sa,<span style="color: #bbbbbb"> </span>sb;
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>a.size()<span style="color: #666666">-1</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&gt;=0</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">--</span>){
<span style="color: #bbbbbb">        </span>sa.push_back(a[i]<span style="color: #666666">-</span><span style="color: #BA2121">&#39;0&#39;</span>);
<span style="color: #bbbbbb">    </span>}
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">=</span>b.size()<span style="color: #666666">-1</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&gt;=0</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">--</span>){
<span style="color: #bbbbbb">        </span>sb.push_back(b[i]<span style="color: #666666">-</span><span style="color: #BA2121">&#39;0&#39;</span>);
<span style="color: #bbbbbb">    </span>}
<span style="color: #bbbbbb">    </span>vint<span style="color: #bbbbbb"> </span>sc<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>add(sa,<span style="color: #bbbbbb"> </span>sb);
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">=</span>sc.size()<span style="color: #666666">-1</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&gt;=0</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">--</span>){
<span style="color: #bbbbbb">        </span>cout<span style="color: #666666">&lt;&lt;</span>sc[i];
<span style="color: #bbbbbb">    </span>}
}
</pre></div>

<h2>高精度的减法</h2>
<ol>
<li>细节:</li>
</ol>
<p>(1)判定是不是足够减.</p>
<p>一个优雅的解法: 如果有A-B, 对于每一位我们有Ai-Bi-t, 如果不够减, 就+10.</p>
<p>(2)判断谁是大的. 如果出负数的话就交换之.</p>
<ol start="2">
<li>代码</li>
</ol>
<p>(1) 比较谁大(如果A比B大, 返回True)</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #B00040">bool</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF">cmp</span>(vint<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;</span>a,<span style="color: #bbbbbb"> </span>vint<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;</span>b){
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">if</span>(a.size()<span style="color: #666666">!=</span>b.size())<span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">return</span><span style="color: #bbbbbb"> </span>a.size()<span style="color: #666666">&gt;</span>b.size();
<span style="color: #bbbbbb">    </span>
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">=</span>a.size()<span style="color: #666666">-1</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&gt;=0</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">--</span>)
<span style="color: #bbbbbb">        </span><span style="color: #008000; font-weight: bold">if</span>(a[i]<span style="color: #bbbbbb"> </span><span style="color: #666666">!=</span><span style="color: #bbbbbb"> </span>b[i])<span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">return</span><span style="color: #bbbbbb"> </span>a[i]<span style="color: #666666">&gt;</span>b[i];
<span style="color: #bbbbbb">    </span>
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">return</span><span style="color: #bbbbbb"> </span><span style="color: #008000">true</span>;
}
</pre></div>

<p>(2) 做减法</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span>vint<span style="color: #bbbbbb"> </span><span style="color: #0000FF">sub</span>(vint<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;</span>a,<span style="color: #bbbbbb"> </span>vint<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;</span>b){
<span style="color: #bbbbbb">    </span><span style="color: #3D7B7B; font-style: italic">// We have make sure that a&gt;b</span>
<span style="color: #bbbbbb">    </span>vint<span style="color: #bbbbbb"> </span>c;
<span style="color: #bbbbbb">    </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>t<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span><span style="color: #666666">0</span>;
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">=0</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&lt;</span>a.size()<span style="color: #bbbbbb"> </span><span style="color: #666666">||</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">&lt;</span>b.size();<span style="color: #bbbbbb"> </span>i<span style="color: #666666">++</span>){
<span style="color: #bbbbbb">        </span>t<span style="color: #bbbbbb"> </span><span style="color: #666666">-=</span><span style="color: #bbbbbb"> </span>a[i];
<span style="color: #bbbbbb">        </span><span style="color: #008000; font-weight: bold">if</span>(t<span style="color: #666666">&lt;</span>b.size())<span style="color: #bbbbbb"> </span>t<span style="color: #bbbbbb"> </span><span style="color: #666666">-=</span><span style="color: #bbbbbb"> </span>b[i];
<span style="color: #bbbbbb">        </span>c.push_back((t<span style="color: #666666">+10</span>)<span style="color: #666666">%10</span>);
<span style="color: #bbbbbb">        </span><span style="color: #008000; font-weight: bold">if</span>(t<span style="color: #666666">&lt;0</span>)<span style="color: #bbbbbb"> </span>t<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span><span style="color: #666666">1</span>;
<span style="color: #bbbbbb">        </span><span style="color: #008000; font-weight: bold">else</span><span style="color: #bbbbbb"> </span>t<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span><span style="color: #666666">0</span>;
<span style="color: #bbbbbb">    </span>}
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">return</span><span style="color: #bbbbbb"> </span>c;
}
</pre></div>

<h2>高精度乘(除)低精度</h2>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #9C6500">#include</span><span style="color: #bbbbbb"> </span><span style="color: #3D7B7B; font-style: italic">&lt;bits/stdc++.h&gt;</span>
<span style="color: #008000; font-weight: bold">using</span><span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">namespace</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF; font-weight: bold">std</span>;
<span style="color: #9C6500">#define  vint vector&lt;int &gt;</span>

vint<span style="color: #bbbbbb"> </span><span style="color: #0000FF">mul</span>(vint<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;</span>a,<span style="color: #bbbbbb"> </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>b){
<span style="color: #bbbbbb">    </span>vint<span style="color: #bbbbbb"> </span>c;
<span style="color: #bbbbbb">    </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>t<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span><span style="color: #666666">0</span>;
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">=0</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&lt;</span>a.size()<span style="color: #bbbbbb"> </span><span style="color: #666666">||</span><span style="color: #bbbbbb"> </span>t;i<span style="color: #666666">++</span>){
<span style="color: #bbbbbb">        </span><span style="color: #008000; font-weight: bold">if</span>(i<span style="color: #666666">&lt;</span>a.size())<span style="color: #bbbbbb"> </span>t<span style="color: #666666">+=</span>a[i]<span style="color: #666666">*</span>b;
<span style="color: #bbbbbb">        </span>c.push_back(t<span style="color: #666666">%10</span>);
<span style="color: #bbbbbb">        </span>t<span style="color: #666666">/=10</span>;
<span style="color: #bbbbbb">    </span>}
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">while</span>(c.size()<span style="color: #666666">&gt;1</span><span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;&amp;</span><span style="color: #bbbbbb"> </span>c.back()<span style="color: #666666">==0</span>)<span style="color: #bbbbbb"> </span>c.pop_back();
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">return</span><span style="color: #bbbbbb"> </span>c;
}

<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF">main</span>(){
<span style="color: #bbbbbb">    </span>string<span style="color: #bbbbbb"> </span>a;<span style="color: #bbbbbb"> </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>b;
<span style="color: #bbbbbb">    </span>cin<span style="color: #666666">&gt;&gt;</span>a<span style="color: #666666">&gt;&gt;</span>b;
<span style="color: #bbbbbb">    </span>vint<span style="color: #bbbbbb"> </span>A;<span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">=</span>a.size()<span style="color: #666666">-1</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&gt;=0</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">--</span>)<span style="color: #bbbbbb"> </span>A.push_back(a[i]<span style="color: #666666">-</span><span style="color: #BA2121">&#39;0&#39;</span>);
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">auto</span><span style="color: #bbbbbb"> </span>c<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>mul(A,<span style="color: #bbbbbb"> </span>b);
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">=</span>c.size()<span style="color: #666666">-1</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&gt;=0</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">--</span>)<span style="color: #bbbbbb"> </span>printf(<span style="color: #BA2121">&quot;%d&quot;</span>,<span style="color: #bbbbbb"> </span>c[i]);
}
</pre></div>

<p>除法:</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #9C6500">#include</span><span style="color: #bbbbbb"> </span><span style="color: #3D7B7B; font-style: italic">&lt;bits/stdc++.h&gt;</span>
<span style="color: #008000; font-weight: bold">using</span><span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">namespace</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF; font-weight: bold">std</span>;
<span style="color: #9C6500">#define  vint vector&lt;int &gt;</span>

vint<span style="color: #bbbbbb"> </span><span style="color: #0000FF">div</span>(vint<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;</span>a,<span style="color: #bbbbbb"> </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>b,<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;</span>r){
<span style="color: #bbbbbb">    </span>vint<span style="color: #bbbbbb"> </span>c;
<span style="color: #bbbbbb">    </span>r<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span><span style="color: #666666">0</span>;
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">=</span>a.size();<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&gt;=0</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">--</span>){
<span style="color: #bbbbbb">        </span>r<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>r<span style="color: #666666">*10+</span>a[i];
<span style="color: #bbbbbb">        </span>c.push_back(r<span style="color: #666666">/</span>b);
<span style="color: #bbbbbb">        </span>r<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>r<span style="color: #666666">%</span>b;
<span style="color: #bbbbbb">    </span>}
<span style="color: #bbbbbb">    </span>reverse(c.begin(),<span style="color: #bbbbbb"> </span>c.end());
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">while</span>(c.size()<span style="color: #666666">&gt;1</span><span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;&amp;</span><span style="color: #bbbbbb"> </span>c.back()<span style="color: #666666">==0</span>)<span style="color: #bbbbbb"> </span>c.pop_back();
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">return</span><span style="color: #bbbbbb"> </span>c;
}

<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF">main</span>(){
<span style="color: #bbbbbb">    </span>string<span style="color: #bbbbbb"> </span>a;<span style="color: #bbbbbb"> </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>b,<span style="color: #bbbbbb"> </span>r;
<span style="color: #bbbbbb">    </span>cin<span style="color: #666666">&gt;&gt;</span>a<span style="color: #666666">&gt;&gt;</span>b;
<span style="color: #bbbbbb">    </span>vint<span style="color: #bbbbbb"> </span>A;<span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">=</span>a.size()<span style="color: #666666">-1</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&gt;=0</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">--</span>)<span style="color: #bbbbbb"> </span>A.push_back(a[i]<span style="color: #666666">-</span><span style="color: #BA2121">&#39;0&#39;</span>);
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">auto</span><span style="color: #bbbbbb"> </span>c<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>div(A,<span style="color: #bbbbbb"> </span>b,<span style="color: #bbbbbb"> </span>r);
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">=</span>c.size()<span style="color: #666666">-1</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&gt;=0</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">--</span>)<span style="color: #bbbbbb"> </span>printf(<span style="color: #BA2121">&quot;%d&quot;</span>,<span style="color: #bbbbbb"> </span>c[i]);
<span style="color: #bbbbbb">    </span>printf(<span style="color: #BA2121">&quot;</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">%d&quot;</span>,<span style="color: #bbbbbb"> </span>r);
}
</pre></div>

<h1>前缀和与差分</h1>
<h2>二维前缀和</h2>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #9C6500">#include</span><span style="color: #bbbbbb"> </span><span style="color: #3D7B7B; font-style: italic">&lt;bits/stdc++.h&gt;</span>
<span style="color: #008000; font-weight: bold">using</span><span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">namespace</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF; font-weight: bold">std</span>;
<span style="color: #9C6500">#define MAXN 1010</span>
<span style="color: #9C6500">#define F(i,a ,b) for(int i=a; i&lt;=b; i++)</span>
<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>n,<span style="color: #bbbbbb"> </span>m,<span style="color: #bbbbbb"> </span>q;
<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>a[MAXN][MAXN],<span style="color: #bbbbbb"> </span>s[MAXN][MAXN];


<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF">main</span>(){
<span style="color: #bbbbbb">    </span>scanf(<span style="color: #BA2121">&quot;%d%d%d&quot;</span>,<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;</span>n,<span style="color: #666666">&amp;</span>m,<span style="color: #666666">&amp;</span>q);
<span style="color: #bbbbbb">    </span>F(i,<span style="color: #bbbbbb"> </span><span style="color: #666666">1</span>,<span style="color: #bbbbbb"> </span>n)<span style="color: #bbbbbb"> </span>F(j,<span style="color: #bbbbbb"> </span><span style="color: #666666">1</span>,<span style="color: #bbbbbb"> </span>m)<span style="color: #bbbbbb"> </span>scanf(<span style="color: #BA2121">&quot;%d&quot;</span>,<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;</span>a[i][j]);
<span style="color: #bbbbbb">    </span>F(i,<span style="color: #bbbbbb"> </span><span style="color: #666666">1</span>,<span style="color: #bbbbbb"> </span>n)<span style="color: #bbbbbb"> </span>F(j,<span style="color: #bbbbbb"> </span><span style="color: #666666">1</span>,<span style="color: #bbbbbb"> </span>m)<span style="color: #bbbbbb"> </span>s[i][j]<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>s[i<span style="color: #666666">-1</span>][j]<span style="color: #666666">+</span>s[i][j<span style="color: #666666">-1</span>]<span style="color: #666666">-</span>s[i<span style="color: #666666">-1</span>][j<span style="color: #666666">-1</span>]<span style="color: #666666">+</span>a[i][j];
<span style="color: #bbbbbb">    </span>
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">while</span>(q<span style="color: #666666">--</span>){
<span style="color: #bbbbbb">        </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>x1,<span style="color: #bbbbbb"> </span>y1,<span style="color: #bbbbbb"> </span>x2,<span style="color: #bbbbbb"> </span>y2;
<span style="color: #bbbbbb">        </span>scanf(<span style="color: #BA2121">&quot;%d%d%d%d&quot;</span>,<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;</span>x1,<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;</span>x2,<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;</span>y1,<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;</span>y2);
<span style="color: #bbbbbb">        </span>printf(<span style="color: #BA2121">&quot;%d</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>,<span style="color: #bbbbbb"> </span>s[x2][y2]<span style="color: #666666">-</span>s[x1<span style="color: #666666">-1</span>][y2]<span style="color: #666666">-</span>s[x2][y1<span style="color: #666666">-1</span>]<span style="color: #666666">+</span>s[x1<span style="color: #666666">-1</span>][y1<span style="color: #666666">-1</span>]);
<span style="color: #bbbbbb">    </span>}
<span style="color: #bbbbbb">    </span>
}
</pre></div>

<h1>双指针</h1>
<ol>
<li>通用模板</li>
</ol>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #008000; font-weight: bold">for</span>(i<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span><span style="color: #666666">0</span>,<span style="color: #bbbbbb"> </span>j<span style="color: #666666">=0</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&lt;</span>n;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">++</span>){
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">while</span>(j<span style="color: #666666">&lt;</span>i<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;&amp;</span><span style="color: #bbbbbb"> </span>check(i,j))<span style="color: #bbbbbb"> </span>j<span style="color: #666666">++</span>;
<span style="color: #bbbbbb">    </span><span style="color: #3D7B7B; font-style: italic">// 问题的具体逻辑</span>
}
</pre></div>

<p>核心思想: 如果我们使用<code>F(i,1,n)F(j,1,n)</code>, 那么有 \(n^2\) 种组合. 但是这样我们就可以做 \(n\) 的复杂度. 两个指针的移动不超过2n.</p>
<p>基本例1. 输出单词</p>
<p>要求: 输入一个单词, 有一个空格隔开, 每行一个单词输出.</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #9C6500">#include</span><span style="color: #bbbbbb"> </span><span style="color: #3D7B7B; font-style: italic">&lt;bits/stdc++.h&gt;</span>
<span style="color: #008000; font-weight: bold">using</span><span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">namespace</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF; font-weight: bold">std</span>;

<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF">main</span>(){
<span style="color: #bbbbbb">	</span><span style="color: #B00040">char</span><span style="color: #bbbbbb"> </span>str[<span style="color: #666666">1000</span>];
<span style="color: #bbbbbb">	</span>gets(str);
<span style="color: #bbbbbb">	</span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>n<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>strlen(str);
<span style="color: #bbbbbb">	</span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">=0</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&lt;</span>n;i<span style="color: #666666">++</span>){
<span style="color: #bbbbbb">		</span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>j<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>i;<span style="color: #bbbbbb"> </span>
<span style="color: #bbbbbb">		</span><span style="color: #008000; font-weight: bold">while</span>(j<span style="color: #666666">&lt;</span>n<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;&amp;</span><span style="color: #bbbbbb"> </span>str[j]<span style="color: #666666">!=</span><span style="color: #BA2121">&#39; &#39;</span>){
<span style="color: #bbbbbb">			</span>j<span style="color: #666666">++</span>;
<span style="color: #bbbbbb">		</span>}
<span style="color: #bbbbbb">        </span><span style="color: #3D7B7B; font-style: italic">// Particular logic</span>
<span style="color: #bbbbbb">		</span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>k<span style="color: #666666">=</span>i;<span style="color: #bbbbbb"> </span>k<span style="color: #666666">&lt;</span>j;k<span style="color: #666666">++</span>){
<span style="color: #bbbbbb">			</span>cout<span style="color: #666666">&lt;&lt;</span>str[k];
<span style="color: #bbbbbb">		</span>}
<span style="color: #bbbbbb">		</span>cout<span style="color: #666666">&lt;&lt;</span>endl;
<span style="color: #bbbbbb">		</span>i<span style="color: #666666">=</span>j;
<span style="color: #bbbbbb">	</span>}
}
</pre></div>

<p>基本例2. 最长连续不重复子序列(ACW799)</p>
<p>题目大意: 给定一个长度为 n 的整数序列，请找出最长的不包含重复的数的连续区间，输出它的长度。</p>
<p>暴力做法: 枚举起点,终点, 判断j到i是不是成立.</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span>---------------
    ^      ^ 
    Green  Red
</pre></div>

<p>优化: 每次红颜色的指针往后移动一个, 绿颜色的指针也会往后移动一位. (证明: 如果对应当前红颜色的指针绿颜色往前移动了, 一个没有重复子区间的内部也没有重复子区间, 矛盾! )</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #9C6500">#include</span><span style="color: #bbbbbb"> </span><span style="color: #3D7B7B; font-style: italic">&lt;bits/stdc++.h&gt;</span>
<span style="color: #008000; font-weight: bold">using</span><span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">namespace</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF; font-weight: bold">std</span>;
<span style="color: #9C6500">#define MAXN 100010</span>
<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>n,<span style="color: #bbbbbb"> </span>a[MAXN];
<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>res<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span><span style="color: #666666">-1</span>;
<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>s[MAXN];<span style="color: #bbbbbb"> </span><span style="color: #3D7B7B; font-style: italic">// [j..i]每一个数出现的次数</span>
<span style="color: #B00040">bool</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF">check</span>(){
<span style="color: #bbbbbb">    </span>
}
<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF">main</span>(){
<span style="color: #bbbbbb">    </span>scanf(<span style="color: #BA2121">&quot;%d&quot;</span>,<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;</span>n);
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">=1</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&lt;=</span>n;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">++</span>)<span style="color: #bbbbbb"> </span>scanf(<span style="color: #BA2121">&quot;%d&quot;</span>,<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;</span>a[i]);
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">=1</span>,<span style="color: #bbbbbb"> </span>j<span style="color: #666666">=1</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&lt;=</span>n;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">++</span>){
<span style="color: #bbbbbb">        </span>s[a[i]]<span style="color: #666666">++</span>;
<span style="color: #bbbbbb">        </span><span style="color: #008000; font-weight: bold">while</span>(j<span style="color: #666666">&lt;=</span>i<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;&amp;</span><span style="color: #bbbbbb"> </span>s[a[i]]<span style="color: #666666">&gt;1</span>)<span style="color: #bbbbbb"> </span>{
<span style="color: #bbbbbb">            </span>s[a[j]]<span style="color: #666666">--</span>;<span style="color: #bbbbbb"> </span>j<span style="color: #666666">++</span>;
<span style="color: #bbbbbb">        </span>}
<span style="color: #bbbbbb">        </span>res<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>max(res,<span style="color: #bbbbbb"> </span>i<span style="color: #666666">-</span>j<span style="color: #666666">+1</span>);
<span style="color: #bbbbbb">    </span>}
<span style="color: #bbbbbb">    </span>printf(<span style="color: #BA2121">&quot;%d&quot;</span>,<span style="color: #bbbbbb"> </span>res);
}
</pre></div>

<p>注意不要每一次更新的时候都更新j, 因为没有必要.</p>
<p>练习例1. 数组元素的目标和
给定两个升序排序的有序数组 A和 B，以及一个目标值 x。</p>
<p>数组下标从 0开始。</p>
<p>请你求出满足 A[i]+B[j]=x的数对 (i,j)。</p>
<p>数据保证有唯一解。</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #9C6500">#include</span><span style="color: #3D7B7B; font-style: italic">&lt;bits/stdc++.h&gt;</span>
<span style="color: #9C6500">#define MAXN 100090</span>
<span style="color: #9C6500">#define int long long</span>
<span style="color: #008000; font-weight: bold">using</span><span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">namespace</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF; font-weight: bold">std</span>;
<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>n,<span style="color: #bbbbbb"> </span>m,<span style="color: #bbbbbb"> </span>x;<span style="color: #bbbbbb"> </span>
<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>a[MAXN],<span style="color: #bbbbbb"> </span>b[MAXN];
<span style="color: #B00040">signed</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF">main</span>(){
<span style="color: #bbbbbb">    </span>cin<span style="color: #666666">&gt;&gt;</span>n<span style="color: #666666">&gt;&gt;</span>m<span style="color: #666666">&gt;&gt;</span>x;
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">=1</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&lt;=</span>n;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">++</span>)<span style="color: #bbbbbb"> </span>cin<span style="color: #666666">&gt;&gt;</span>a[i];
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">=1</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&lt;=</span>m;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">++</span>)<span style="color: #bbbbbb"> </span>cin<span style="color: #666666">&gt;&gt;</span>b[i];
<span style="color: #bbbbbb">    </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>sum<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>a[<span style="color: #666666">1</span>]<span style="color: #666666">+</span>b[m];
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">=1</span>,j<span style="color: #666666">=</span>m;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&lt;=</span>n;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">++</span>){
<span style="color: #bbbbbb">        </span><span style="color: #008000; font-weight: bold">while</span>(a[i]<span style="color: #666666">+</span>b[j]<span style="color: #bbbbbb"> </span><span style="color: #666666">&gt;</span><span style="color: #bbbbbb"> </span>x){
<span style="color: #bbbbbb">            </span>j<span style="color: #666666">--</span>;
<span style="color: #bbbbbb">        </span>}
<span style="color: #bbbbbb">        </span><span style="color: #008000; font-weight: bold">if</span>(a[i]<span style="color: #666666">+</span>b[j]<span style="color: #bbbbbb"> </span><span style="color: #666666">==</span><span style="color: #bbbbbb"> </span>x){
<span style="color: #bbbbbb">            </span>printf(<span style="color: #BA2121">&quot;%d %d&quot;</span>,<span style="color: #bbbbbb"> </span>i<span style="color: #666666">-1</span>,<span style="color: #bbbbbb"> </span>j<span style="color: #666666">-1</span>);
<span style="color: #bbbbbb">            </span><span style="color: #008000; font-weight: bold">break</span>;
<span style="color: #bbbbbb">        </span>}
<span style="color: #bbbbbb">        </span>
<span style="color: #bbbbbb">    </span>}
}
</pre></div>

<p>练习例2. 判断子序列</p>
<p><img src="https://s2.loli.net/2023/03/22/IkN2rcxLhR3iE1A.png" alt="Img" /></p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #9C6500">#include</span><span style="color: #bbbbbb"> </span><span style="color: #3D7B7B; font-style: italic">&lt;bits/stdc++.h&gt;</span>
<span style="color: #008000; font-weight: bold">using</span><span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">namespace</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF; font-weight: bold">std</span>;<span style="color: #bbbbbb"> </span>
<span style="color: #9C6500">#define MAXN 100010</span>
<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>n,<span style="color: #bbbbbb"> </span>m;<span style="color: #bbbbbb"> </span>
<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>a[MAXN],<span style="color: #bbbbbb"> </span>b[MAXN];

<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF">main</span>(){
<span style="color: #bbbbbb">    </span>scanf(<span style="color: #BA2121">&quot;%d%d&quot;</span>,<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;</span>n,<span style="color: #666666">&amp;</span>m);
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">=1</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&lt;=</span>n;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">++</span>)<span style="color: #bbbbbb"> </span>scanf(<span style="color: #BA2121">&quot;%d&quot;</span>,<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;</span>a[i]);
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">=1</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&lt;=</span>m;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">++</span>)<span style="color: #bbbbbb"> </span>scanf(<span style="color: #BA2121">&quot;%d&quot;</span>,<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;</span>b[i]);
<span style="color: #bbbbbb">    </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i,j;
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">for</span>(i<span style="color: #666666">=1</span>,<span style="color: #bbbbbb"> </span>j<span style="color: #666666">=1</span>;<span style="color: #bbbbbb"> </span>j<span style="color: #666666">&lt;=</span>m;<span style="color: #bbbbbb"> </span>j<span style="color: #666666">++</span>){
<span style="color: #bbbbbb">        </span><span style="color: #008000; font-weight: bold">if</span>(i<span style="color: #666666">&lt;=</span>n<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;&amp;</span><span style="color: #bbbbbb"> </span>a[i]<span style="color: #666666">==</span>b[j]){
<span style="color: #bbbbbb">             </span>i<span style="color: #666666">++</span>;
<span style="color: #bbbbbb">        </span>}
<span style="color: #bbbbbb">    </span>}
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">if</span>(i<span style="color: #666666">==</span>n<span style="color: #666666">+1</span><span style="color: #bbbbbb"> </span>)<span style="color: #bbbbbb"> </span>cout<span style="color: #666666">&lt;&lt;</span><span style="color: #BA2121">&quot;Yes&quot;</span>;
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">else</span><span style="color: #bbbbbb"> </span>cout<span style="color: #666666">&lt;&lt;</span><span style="color: #BA2121">&quot;No&quot;</span>;
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">return</span><span style="color: #bbbbbb"> </span><span style="color: #666666">0</span>;
}
</pre></div>

<h1>二进制算法</h1>
<ol>
<li>一个数二进制中的第k位: <code>a&gt;&gt;k &amp; 1</code></li>
<li>lowbit函数: 返回一个数x的二进制表示最后一位是1的位数. <code>x&amp;(-x)</code>. 其中-x = ~x+1.</li>
</ol>
<h1>离散化</h1>
<ol>
<li>本质: 把一个大区间中明显不足这么大的区间的数映射到小区间里面.</li>
</ol>
<p>如:</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #666666">1</span><span style="color: #bbbbbb">  </span><span style="color: #666666">3</span><span style="color: #bbbbbb">   </span><span style="color: #666666">100</span><span style="color: #bbbbbb">   </span><span style="color: #666666">20000</span><span style="color: #bbbbbb">   </span><span style="color: #666666">50000000</span>
<span style="color: #bbbbbb">          </span><span style="border: 1px solid #FF0000">|||</span><span style="color: #bbbbbb">  </span>f(x)
<span style="color: #bbbbbb">           </span>v
<span style="color: #666666">0</span><span style="color: #bbbbbb">  </span><span style="color: #666666">1</span><span style="color: #bbbbbb">    </span><span style="color: #666666">2</span><span style="color: #bbbbbb">     </span><span style="color: #666666">3</span><span style="color: #bbbbbb">          </span><span style="color: #666666">4</span>
</pre></div>

<ol start="2">
<li>
<p>一些小问题:</p>
<ul>
<li>a[]可能有重复的元素 (需要去重)</li>
<li>如何算出a里面的值映射的结果 - 保证顺序 a-&gt;下标 (二分)</li>
</ul>
</li>
<li>
<p>常见写法:</p>
</li>
</ol>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span>vector<span style="color: #666666">&lt;</span><span style="color: #B00040">int</span><span style="color: #666666">&gt;</span><span style="color: #bbbbbb"> </span>alls;<span style="color: #bbbbbb"> </span><span style="color: #3D7B7B; font-style: italic">// 存储等待离散化的值</span>
sort(alls.begin(),<span style="color: #bbbbbb"> </span>alls.end());<span style="color: #bbbbbb"> </span><span style="color: #3D7B7B; font-style: italic">// 排序</span>
alls.erase(unique(alls.begin(),<span style="color: #bbbbbb"> </span>alls.end()),<span style="color: #bbbbbb"> </span>alls.end());<span style="color: #bbbbbb"> </span><span style="color: #3D7B7B; font-style: italic">// 去重</span>
<span style="color: #3D7B7B; font-style: italic">// unique是把所有的重复元素去重, 返回数组末尾的端点</span>
<span style="color: #3D7B7B; font-style: italic">// a:     |-------------|</span>
<span style="color: #3D7B7B; font-style: italic">// a-uniq |--------|~~~~|</span>
<span style="color: #3D7B7B; font-style: italic">//                 ^删除</span>
<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF">find</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>x){<span style="color: #bbbbbb"> </span><span style="color: #3D7B7B; font-style: italic">// 找第一个大于等于x的位置, 返回这个位置的下标+1</span>
<span style="color: #bbbbbb">    </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>l<span style="color: #666666">=0</span>,<span style="color: #bbbbbb"> </span>r<span style="color: #666666">=</span>all.size()<span style="color: #666666">-1</span>;
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">while</span>(l<span style="color: #666666">&lt;</span>r){
<span style="color: #bbbbbb">        </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>mid<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>(l<span style="color: #666666">+</span>r)<span style="color: #666666">&gt;&gt;1</span>;
<span style="color: #bbbbbb">        </span><span style="color: #008000; font-weight: bold">if</span>(alls[mid]<span style="color: #666666">&gt;=</span>x)<span style="color: #bbbbbb"> </span>r<span style="color: #666666">=</span>mid;
<span style="color: #bbbbbb">        </span><span style="color: #008000; font-weight: bold">else</span><span style="color: #bbbbbb"> </span>l<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>mid<span style="color: #666666">+1</span>;
<span style="color: #bbbbbb">    </span>}
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">return</span><span style="color: #bbbbbb"> </span>r<span style="color: #666666">+1</span>;<span style="color: #bbbbbb"> </span><span style="color: #3D7B7B; font-style: italic">// +1映射到1,2,...,n; 否则从0开始. </span>
}
</pre></div>

<p>基本例. ACW802</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #9C6500">#include</span><span style="color: #bbbbbb"> </span><span style="color: #3D7B7B; font-style: italic">&lt;bits/stdc++.h&gt;</span>
<span style="color: #008000; font-weight: bold">using</span><span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">namespace</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF; font-weight: bold">std</span>;

<span style="color: #008000; font-weight: bold">using</span><span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">namespace</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF; font-weight: bold">std</span>;
<span style="color: #9C6500">#define MAXN 300007</span>
<span style="color: #9C6500">#define PII pair&lt;int, int&gt;</span>
<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>n,<span style="color: #bbbbbb"> </span>m;
<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>a[MAXN],<span style="color: #bbbbbb"> </span>s[MAXN];
vector<span style="color: #666666">&lt;</span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span><span style="color: #666666">&gt;</span><span style="color: #bbbbbb"> </span>alls;
vector<span style="color: #666666">&lt;</span>PII<span style="color: #bbbbbb"> </span><span style="color: #666666">&gt;</span><span style="color: #bbbbbb"> </span>add,<span style="color: #bbbbbb"> </span>query;
<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF">find</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>x){
<span style="color: #bbbbbb">  </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>l<span style="color: #666666">=0</span>,<span style="color: #bbbbbb"> </span>r<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>alls.size()<span style="color: #666666">-1</span>;
<span style="color: #bbbbbb">  </span><span style="color: #008000; font-weight: bold">while</span>(l<span style="color: #666666">&lt;</span>r){
<span style="color: #bbbbbb">    </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>mid<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>l<span style="color: #666666">+</span>r<span style="color: #666666">&gt;&gt;1</span>;
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">if</span>(alls[mid]<span style="color: #666666">&gt;=</span>x)<span style="color: #bbbbbb"> </span>r<span style="color: #666666">=</span>mid;
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">else</span><span style="color: #bbbbbb"> </span>l<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>mid<span style="color: #666666">+1</span>;
<span style="color: #bbbbbb">  </span>}
<span style="color: #bbbbbb">  </span><span style="color: #008000; font-weight: bold">return</span><span style="color: #bbbbbb"> </span>r<span style="color: #666666">+1</span>;
<span style="color: #bbbbbb">  </span>
}
<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF">main</span>(){
<span style="color: #bbbbbb">  </span>cin<span style="color: #666666">&gt;&gt;</span>n<span style="color: #666666">&gt;&gt;</span>m;
<span style="color: #bbbbbb">  </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">=0</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&lt;</span>n;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">++</span>){
<span style="color: #bbbbbb">    </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>x,<span style="color: #bbbbbb"> </span>c;
<span style="color: #bbbbbb">    </span>cin<span style="color: #666666">&gt;&gt;</span>x<span style="color: #666666">&gt;&gt;</span>c;
<span style="color: #bbbbbb">    </span>add.push_back({x,c});
<span style="color: #bbbbbb">    </span>alls.push_back(x);
<span style="color: #bbbbbb">    </span>
<span style="color: #bbbbbb">  </span>}
<span style="color: #bbbbbb">  </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">=0</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&lt;</span>m;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">++</span>){
<span style="color: #bbbbbb">    </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>l,<span style="color: #bbbbbb"> </span>r;
<span style="color: #bbbbbb">    </span>cin<span style="color: #666666">&gt;&gt;</span>l<span style="color: #666666">&gt;&gt;</span>r;
<span style="color: #bbbbbb">    </span>query.push_back({l,r});
<span style="color: #bbbbbb">    </span>
<span style="color: #bbbbbb">    </span>alls.push_back(l);
<span style="color: #bbbbbb">    </span>alls.push_back(r);
<span style="color: #bbbbbb">    </span>
<span style="color: #bbbbbb">  </span>}
<span style="color: #bbbbbb">  </span>
<span style="color: #bbbbbb">  </span>sort(alls.begin(),<span style="color: #bbbbbb"> </span>alls.end());
<span style="color: #bbbbbb">  </span>alls.erase(unique(alls.begin(),<span style="color: #bbbbbb"> </span>alls.end()),<span style="color: #bbbbbb"> </span>alls.end());
<span style="color: #bbbbbb">  </span>
<span style="color: #bbbbbb">  </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #008000; font-weight: bold">auto</span><span style="color: #bbbbbb"> </span>item<span style="color: #bbbbbb"> </span><span style="color: #666666">:</span><span style="color: #bbbbbb"> </span>add){
<span style="color: #bbbbbb">    </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>x<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>find(item.first);
<span style="color: #bbbbbb">    </span>a[x]<span style="color: #666666">+=</span>item.second;
<span style="color: #bbbbbb">  </span>}
<span style="color: #bbbbbb">  </span>
<span style="color: #bbbbbb">  </span><span style="color: #3D7B7B; font-style: italic">// prefix</span>
<span style="color: #bbbbbb">  </span>
<span style="color: #bbbbbb">  </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">=1</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&lt;=</span>alls.size();<span style="color: #bbbbbb"> </span>i<span style="color: #666666">++</span>){
<span style="color: #bbbbbb">    </span>s[i]<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>s[i<span style="color: #666666">-1</span>]<span style="color: #666666">+</span>a[i];
<span style="color: #bbbbbb">  </span>}
<span style="color: #bbbbbb">  </span>
<span style="color: #bbbbbb">  </span><span style="color: #3D7B7B; font-style: italic">//query</span>
<span style="color: #bbbbbb">  </span>
<span style="color: #bbbbbb">  </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #008000; font-weight: bold">auto</span><span style="color: #bbbbbb"> </span>item<span style="color: #bbbbbb"> </span><span style="color: #666666">:</span><span style="color: #bbbbbb"> </span>query){
<span style="color: #bbbbbb">    </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>x<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>find(item.first),<span style="color: #bbbbbb"> </span>y<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>find(item.second);
<span style="color: #bbbbbb">    </span>cout<span style="color: #666666">&lt;&lt;</span>s[y]<span style="color: #666666">-</span>s[x<span style="color: #666666">-1</span>]<span style="color: #666666">&lt;&lt;</span>endl;
<span style="color: #bbbbbb">    </span>
<span style="color: #bbbbbb">  </span>}
<span style="color: #bbbbbb">  </span>
<span style="color: #bbbbbb">  </span>
}
</pre></div>

<h1>区间合并</h1>
<p>给定许多区间, 如果有交集, 就把它合并成一个区间. 输入n个区间, 把所有有交集的合并, 输出合并之后的区间个数.</p>
<p>规定: 只有边界相邻, 仍然合并.</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #666666">1</span><span style="color: #bbbbbb"> </span><span style="color: #666666">2</span><span style="color: #bbbbbb"> </span><span style="color: #666666">3</span><span style="color: #bbbbbb"> </span><span style="color: #666666">4</span><span style="color: #bbbbbb"> </span><span style="color: #666666">5</span><span style="color: #bbbbbb"> </span><span style="color: #666666">6</span><span style="color: #bbbbbb"> </span><span style="color: #666666">7</span><span style="color: #bbbbbb"> </span><span style="color: #666666">8</span><span style="color: #bbbbbb"> </span><span style="color: #666666">9</span>
<span style="border: 1px solid #FF0000">|</span><span style="color: #666666">-</span><span style="border: 1px solid #FF0000">|</span>
<span style="color: #bbbbbb">  </span><span style="border: 1px solid #FF0000">|</span><span style="color: #666666">---</span><span style="border: 1px solid #FF0000">|</span><span style="color: #bbbbbb"> </span><span style="border: 1px solid #FF0000">|</span><span style="color: #666666">-</span><span style="border: 1px solid #FF0000">|</span><span style="color: #bbbbbb"> </span><span style="border: 1px solid #FF0000">|</span><span style="color: #666666">---</span><span style="border: 1px solid #FF0000">|</span>
<span style="color: #bbbbbb">             </span><span style="border: 1px solid #FF0000">|</span><span style="color: #666666">--</span><span style="border: 1px solid #FF0000">|</span>
合并之后:<span style="color: #bbbbbb"> </span>
<span style="border: 1px solid #FF0000">|</span><span style="color: #666666">-----</span><span style="border: 1px solid #FF0000">|</span><span style="color: #bbbbbb"> </span><span style="border: 1px solid #FF0000">|</span><span style="color: #666666">-</span><span style="border: 1px solid #FF0000">|</span><span style="color: #bbbbbb"> </span><span style="border: 1px solid #FF0000">|</span><span style="color: #666666">---</span><span style="border: 1px solid #FF0000">|</span>
</pre></div>

<p>(1) 按照区间的左端点排序
(2) 扫描整个区间, 把可以的合并. 维护当前区间start, end; 如果当前第i个区间, 有包含(A), 有交集(B), 外部(C)的关系.</p>
<p>A. 更新完之后不变.
B. ed = i.end
C. ans ++; st = i.start, ed = i.end</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><span style="color: #9C6500">#include</span><span style="color: #bbbbbb"> </span><span style="color: #3D7B7B; font-style: italic">&lt;bits/stdc++.h&gt;</span>
<span style="color: #008000; font-weight: bold">using</span><span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">namespace</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF; font-weight: bold">std</span>;
<span style="color: #9C6500">#define MAXN 1000010</span>
<span style="color: #9C6500">#define F(i, j, k) for(int i=j; i&lt;=k; i++)</span>
<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>n;<span style="color: #bbbbbb"> </span>vector<span style="color: #666666">&lt;</span>pair<span style="color: #666666">&lt;</span><span style="color: #B00040">int</span>,<span style="color: #bbbbbb"> </span><span style="color: #B00040">int</span><span style="color: #666666">&gt;</span><span style="color: #bbbbbb"> </span><span style="color: #666666">&gt;</span><span style="color: #bbbbbb"> </span>a;
<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF">main</span>(){
<span style="color: #bbbbbb">  </span>cin<span style="color: #666666">&gt;&gt;</span>n;
<span style="color: #bbbbbb">  </span>F(i,<span style="color: #bbbbbb"> </span><span style="color: #666666">1</span>,<span style="color: #bbbbbb"> </span>n)<span style="color: #bbbbbb"> </span>{
<span style="color: #bbbbbb">    </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>x,<span style="color: #bbbbbb"> </span>y;<span style="color: #bbbbbb"> </span>cin<span style="color: #666666">&gt;&gt;</span>x<span style="color: #666666">&gt;&gt;</span>y;
<span style="color: #bbbbbb">    </span>a.push_back({x,y});
<span style="color: #bbbbbb">  </span>}
<span style="color: #bbbbbb">  </span>sort(a.begin(),<span style="color: #bbbbbb"> </span>a.end());
<span style="color: #bbbbbb">  </span><span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>cl<span style="color: #666666">=</span>a[<span style="color: #666666">0</span>].first,<span style="color: #bbbbbb"> </span>cr<span style="color: #666666">=</span>a[<span style="color: #666666">0</span>].second,<span style="color: #bbbbbb"> </span>ans<span style="color: #666666">=1</span>;
<span style="color: #bbbbbb">  </span><span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>i<span style="color: #666666">=1</span>;<span style="color: #bbbbbb"> </span>i<span style="color: #666666">&lt;</span>n;i<span style="color: #666666">++</span>){
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">auto</span><span style="color: #bbbbbb"> </span>cur<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>a[i];
<span style="color: #bbbbbb">    </span><span style="color: #008000; font-weight: bold">if</span>(cur.first<span style="color: #bbbbbb"> </span><span style="color: #666666">&gt;</span><span style="color: #bbbbbb"> </span>cr){
<span style="color: #bbbbbb">      </span>cl<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>cur.first;
<span style="color: #bbbbbb">      </span>cr<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>cur.second;
<span style="color: #bbbbbb">      </span>ans<span style="color: #666666">++</span>;
<span style="color: #bbbbbb">    </span>}<span style="color: #008000; font-weight: bold">else</span><span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">if</span>(cur.second<span style="color: #666666">&gt;</span>cr){
<span style="color: #bbbbbb">      </span>cr<span style="color: #bbbbbb"> </span><span style="color: #666666">=</span><span style="color: #bbbbbb"> </span>cur.second;
<span style="color: #bbbbbb">    </span>}
<span style="color: #bbbbbb">  </span>}
<span style="color: #bbbbbb">  </span>cout<span style="color: #666666">&lt;&lt;</span>ans<span style="color: #666666">&lt;&lt;</span>endl;
<span style="color: #bbbbbb">  </span>
}
</pre></div>


    </div>

   
   
   
    <hr>






    <div id="disqus_thread"></div>
    <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-MML-AM_CHTML">
    </script>
    <script>
        /**
        *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
        *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
        
        // var disqus_config = function () {
        // this.page.url = ;  // Replace PAGE_URL with your page's canonical URL variable
        // this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
        // };
        
        (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://augpath.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <script id="dsq-count-scr" src="//augpath.disqus.com/count.js" async></script>
  </body>
</html>